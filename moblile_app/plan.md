# План реализации мобильного приложения "NeoBank Client"

Этот план основан на техническом задании и предполагает последовательную разработку в соответствии с каскадной моделью.

---

## Этап 1: Настройка проекта и архитектурной основы

1.  **Инициализация проекта:**
    *   Создать новый проект Flutter.
    *   Инициализировать Git-репозиторий для контроля версий.
    *   Добавить в `pubspec.yaml` основные зависимости:
        *   `flutter_bloc` или `riverpod` (для управления состоянием).
        *   `freezed` и `freezed_annotation` (для создания моделей данных).
        *   `intl` (для локализации и форматирования).
        *   `flutter_svg` (для работы с SVG-иконками).
        *   `build_runner` (для кодогенерации).

2.  **Создание структуры каталогов:**
    *   Организовать проект в соответствии с принципами Clean Architecture:
        *   `lib/data`: для реализации репозиториев и источников данных.
        *   `lib/domain`: для моделей (сущностей) и интерфейсов репозиториев.
        *   `lib/presentation`: для UI (экраны, виджеты) и управления состоянием (BLoC/Provider).
        *   `lib/core` или `lib/common`: для общих элементов (темы, константы, утилиты).
        *   `lib/l10n`: для файлов локализации (`.arb`).

3.  **Реализация дизайн-системы:**
    *   **Темы:**
        *   Создать файл `app_theme.dart` в `lib/core/theme/`.
        *   Определить `ThemeData` для светлой и темной тем, используя цветовую палитру из ТЗ.
        *   Создать класс `AppColors` с константами цветов.
    *   **Типографика:**
        *   Создать файл `app_typography.dart`.
        *   Определить стили текста (H1, H2, Body, Caption) с использованием шрифта Inter или Manrope.
    *   **Ресурсы (Assets):**
        *   Добавить файлы шрифтов в `assets/fonts/`.
        *   Создать каталог `assets/icons/` для SVG-иконой.
        *   Обновить `pubspec.yaml` для подключения ресурсов.

---

## Этап 2: Локализация (i18n)

1.  **Настройка `intl`:**
    *   Создать и настроить файл `l10n.yaml` для генерации кода локализации.
    *   Создать файлы `lib/l10n/intl_ru.arb` и `lib/l10n/intl_en.arb`.

2.  **Заполнение словаря:**
    *   Перенести все ключи и значения из раздела "Словарь (Localization)" технического задания в созданные `.arb` файлы.

3.  **Интеграция в приложение:**
    *   Добавить делегаты `flutter_localizations` и сгенерированный делегат в `MaterialApp`.
    *   Реализовать логику определения языка по умолчанию при первом запуске.

---

## Этап 3: Создание доменного слоя и интерфейсов данных

1.  **Создание моделей (DTO):**
    *   В каталоге `lib/domain/models/` создать Dart-классы для `Account`, `Card`, `Transaction` с помощью `freezed`.
    *   Определить все поля согласно ТЗ.

2.  **Определение интерфейсов репозиториев:**
    *   В каталоге `lib/domain/repositories/` создать абстрактные классы-интерфейсы:
        *   `IAuthRepository`
        *   `IAccountRepository`
        *   `ITransactionRepository`
        *   `ISettingsRepository`
    *   Определить в них методы, указанные в ТЗ.

---

## Этап 4: Реализация UI и управления состоянием (Presentation Layer)

1.  **Экран авторизации:**
    *   Создать `auth_screen.dart`.
    *   Реализовать UI с полями для логина/пароля и кнопкой "Войти".
    *   Использовать ключи локализации (`authLoginLabel`, `authPasswordLabel`, `authButton`).
    *   Создать `AuthBloc` (или Provider), который будет взаимодействовать с `IAuthRepository` для выполнения входа.

2.  **Основная навигация (Shell):**
    *   Создать главный виджет с `BottomNavigationBar`.
    *   Добавить 4 вкладки с иконками и подписями из ключей локализации (`tabHome`, `tabPayments`, `tabAtm`, `tabProfile`).
    *   Настроить навигацию между экранами вкладок.

3.  **Главный экран (вкладка "Главная"):**
    *   Создать `home_screen.dart`.
    *   **Header:** Реализовать приветствие `homeGreeting` с подстановкой имени.
    *   **Блок "Общий баланс":** Вывести заголовок `totalBalanceTitle` и сумму, отформатированную с помощью `NumberFormat.currency` в зависимости от текущей локали.
    *   **Секции "Счета" и "Карты":**
        *   Создать переиспользуемые виджеты для отображения элемента списка счета и карты.
        *   Для виджета карты реализовать эффект "Glassmorphism".
        *   Вывести списки, используя локализованные заголовки `sectionAccounts`, `sectionCards`.
        *   Отображать статусы (`statusActive`, `statusBlocked`) на основе данных.
    *   Создать `DashboardBloc` для загрузки и управления состоянием этих данных.

4.  **Экран "Профиль":**
    *   Создать `profile_screen.dart`.
    *   **Переключатель языка:**
        *   Реализовать пункт меню `settingsLanguage`, открывающий диалог для выбора языка.
        *   При смене языка обновлять `Locale` в провайдере состояния и сохранять выбор через `ISettingsRepository`.
    *   **Переключатель темы:**
        *   Добавить `Switch` с подписью `settingsTheme` для переключения между светлой и темной темой.
    *   **Кнопка выхода.**
    *   Создать `SettingsBloc` (или использовать общий провайдер) для управления состоянием темы и языка.

5.  **Экран детальной информации (счет/карта):**
    *   Создать `product_details_screen.dart`.
    *   Реализовать панель действий с кнопками `actionTopUp`, `actionTransfer`, `actionHistory`.
    *   **История операций:**
        *   Вывести список транзакций.
        *   Даты форматировать с помощью `DateFormat` в соответствии с локалью (`dd.MM.yyyy` или `MM/dd/yyyy`).
    *   Создать `TransactionBloc` для загрузки истории операций.

---

## Этап 5: Завершение и тестирование

1.  **Обработка ошибок:**
    *   Реализовать отображение локализованных сообщений об ошибках (например, при сетевых сбоях).
    *   Обеспечить корректную обработку исключений в BLoC'ах.

2.  **Проверка адаптивности:**
    *   Протестировать корректность отображения UI на устройствах с разными размерами экрана.

3.  **Код-ревью и рефакторинг:**
    *   Проверить весь код на соответствие ТЗ и архитектурным принципам.
    *   Убедиться в отсутствии хардкода строк и в корректном форматировании дат/валют.

4.  **Написание тестов:**
    *   Написать Unit-тесты для логики в BLoC'ах.
    *   Написать Widget-тесты для ключевых компонентов и экранов.
