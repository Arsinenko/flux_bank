---

# Техническое задание: Мобильное приложение "NeoBank Client" (Frontend)

## 1. Введение и Общие требования

### 1.1. Цель
Разработка клиентской части (Presentation Layer) мобильного приложения для физических лиц. Приложение должно предоставлять интерфейс для управления сущностями базы данных (счета, карты, транзакции, кредиты, депозиты).

### 1.2. Стек технологий
*   **Фреймворк:** Flutter (Dart).
*   **Архитектура:** Clean Architecture (реализуем только слои UI, State Management и интерфейсы Repositories).
*   **Управление состоянием:** BLoC или Riverpod.
*   **Локализация:** `flutter_localizations`, `intl` (или `easy_localization`).
*   **Платформы:** iOS, Android.

### 1.3. Принципы реализации
*   **Изоляция данных:** Вся работа с данными ведется через абстрактные классы (Repositories). Прямых HTTP-запросов в UI быть не должно.
*   **Адаптивность:** Интерфейс должен корректно отображаться на устройствах с разными диагоналями экранов.
*   **Мультиязычность:** Полная поддержка Русского (RU) и Английского (EN) языков. Хардкод строк запрещен.

---

## 2. Дизайн-система и Визуальный стиль

Приложение использует стиль "Glassmorphism" (эффект матового стекла) в сочетании с яркими градиентами. Обязательна поддержка двух цветовых тем.

### 2.1. Цветовая палитра (Color Palette)

| Элемент UI | Светлая тема (Light Mode) | Темная тема (Dark Mode) |
| :--- | :--- | :--- |
| **Фон основного экрана** | `#F2F3F7` (Светло-серый) | `#121212` (Почти черный) |
| **Фон карточек/контента** | `#FFFFFF` (Белый) | `#1E1E1E` (Темно-серый) |
| **Основной текст** | `#1C1C1E` (Темно-синий) | `#FFFFFF` (Белый) |
| **Вторичный текст** | `#8E8E93` (Серый) | `#A0A0A0` (Светло-серый) |
| **Акцентный цвет (Primary)** | `#6200EE` (Электрик фиолетовый) | `#BB86FC` (Светлый фиолетовый) |
| **Градиент (Brand Gradient)** | От `#FF512F` до `#DD2476` (Оранжево-розовый) | От `#FF512F` до `#DD2476` (Неон) |
| **Успех (Success)** | `#00C853` (Зеленый) | `#69F0AE` (Светло-зеленый) |
| **Ошибка (Error)** | `#D32F2F` (Красный) | `#FF5252` (Алый) |
| **Разделители** | `#E0E0E0` | `#2C2C2C` |

### 2.2. Типографика
Шрифт без засечек (Sans-Serif), например **Inter** или **Manrope**.
*   **H1:** 34sp, Bold.
*   **H2:** 20sp, SemiBold.
*   **Body:** 16sp, Regular.
*   **Caption:** 12sp, Medium.

### 2.3. Компоненты
*   **Скругление:** 20px (карточки), 12px (кнопки).
*   **Glassmorphism:** Используется на банковских картах и плашках. `BackdropFilter` с размытием `blur(10.0)`, фон `Colors.white.withOpacity(0.1)` (dark) / `0.7` (light), тонкая обводка.

---

## 3. Локализация и Словарь (Localization)

Приложение должно поддерживать динамическое переключение языков. Все строковые литералы должны выноситься в файлы ресурсов (ARB или JSON).

### 3.1. Требования к реализации
1.  **Язык по умолчанию:** Определяется настройками устройства при первом запуске. Если язык устройства не RU и не EN — включать EN.
2.  **Хранение:** Строки хранятся в формате "Ключ" — "Значение".
3.  **Переключение:** Мгновенное обновление UI при смене языка в настройках без перезагрузки приложения.

### 3.2. Структура словаря (Пример ключей)
Ниже приведен обязательный минимальный набор ключей, который должен быть реализован в файлах локализации (`intl_en.arb` и `intl_ru.arb`).

| Ключ (Key) | Значение RU (Value) | Значение EN (Value) |
| :--- | :--- | :--- |
| `appTitle` | Клиент НеоБанка | NeoBank Client |
| `authLoginLabel` | Логин | Username |
| `authPasswordLabel` | Пароль | Password |
| `authButton` | Войти | Sign In |
| `homeGreeting` | Привет, {name} | Hello, {name} |
| `totalBalanceTitle` | Общий баланс | Total Balance |
| `sectionAccounts` | Мои счета | My Accounts |
| `sectionCards` | Карты | Cards |
| `actionTopUp` | Пополнить | Top Up |
| `actionTransfer` | Перевести | Transfer |
| `actionHistory` | История | History |
| `actionSettings` | Настройки | Settings |
| `tabHome` | Главная | Home |
| `tabPayments` | Платежи | Payments |
| `tabAtm` | Банкоматы | ATMs |
| `tabProfile` | Профиль | Profile |
| `statusActive` | Активен | Active |
| `statusBlocked` | Заблокирован | Blocked |
| `settingsLanguage` | Язык приложения | App Language |
| `settingsTheme` | Темная тема | Dark Mode |

---

## 4. Структура экранов (Screen Flow)

### 4.1. Экран авторизации (Auth Screen)
*   **Поля ввода:** Используют ключи `authLoginLabel`, `authPasswordLabel`.


### 4.2. Главный экран (Dashboard)
Нижняя навигация (BottomNavigationBar) с подписями из ключей `tabHome`, `tabPayments`, `tabAtm`, `tabProfile`.

1.  **Header:**
    *   Приветствие: Форматированная строка `homeGreeting` (параметр `{name}` заменяется на имя из `customers.first_name`).
2.  **Баланс:**
    *   Заголовок: `totalBalanceTitle`.
    *   Сумма: Форматируется в зависимости от локали (например, `10 000,00 ₽` для RU и `$10,000.00` для EN).
3.  **Счета и Карты:**
    *   Заголовки секций: `sectionCards`, `sectionAccounts`.
    *   Данные карт и счетов подтягиваются из БД, но статусы (`status`) переводятся через словарь (ключи `statusActive`, `statusBlocked`).

### 4.3. Экран детальной информации (Product Details)
1.  **Панель действий:** Кнопки с подписями `actionTopUp`, `actionTransfer`, `actionHistory`.
2.  **История операций:**
    *   Список транзакций. Даты транзакций форматируются согласно локали (для RU: `dd.MM.yyyy`, для EN: `MM/dd/yyyy`).

### 4.4. Экран "Профиль" (Profile Tab)
Здесь располагаются настройки приложения.

1.  **Инфо пользователя:** Аватар, Имя, Телефон.
2.  **Настройки языка (Language Switcher):**
    *   Пункт меню с текстом `settingsLanguage`.
    *   При нажатии открывается диалог или выпадающий список с выбором: "Русский", "English".
    *   При выборе происходит смена `Locale` в провайдере состояния приложения.
3.  **Настройки темы:**
    *   Переключатель (Switch) с текстом `settingsTheme`.
4.  **Выход:** Кнопка Log Out.

---

## 5. Абстракции данных (Data Domain Layer)

Разработчик UI должен создать интерфейсы репозиториев.

### 5.1. Модели (DTO)
Dart-классы (используя `freezed` или аналоги):
*   **Account:** `id`, `iban`, `balance`, `currency`, `isActive`, `type` (String).
*   **Card:** `id`, `accountId`, `cardNumber`, `expiryDate`, `status`.
*   **Transaction:** `id`, `amount`, `currency`, `date`, `category`, `direction`.

### 5.2. Репозитории (Interfaces)

```dart
abstract class IAuthRepository {
  Future<void> login(String username, String password);
}

abstract class IAccountRepository {
  Future<List<Account>> getAccounts();
  Future<double> getTotalBalance();
}

abstract class ITransactionRepository {
  Future<List<Transaction>> getTransactions({int? accountId});
}

// Новый репозиторий для настроек (язык/тема)
abstract class ISettingsRepository {
  Future<void> setLanguage(String languageCode); // 'ru' или 'en'
  Future<String> getLanguage();
  Future<void> setTheme(bool isDark);
}
```

---

## 6. Требования к реализации

1.  **Internationalization (i18n):** Использовать стандартные механизмы Flutter для работы с `.arb` файлами или JSON. Текст в коде виджетов должен выглядеть как `S.of(context).authButton` или `LocaleKeys.authButton.tr()`.
2.  **Форматирование:**
    *   Даты и валюты должны форматироваться через пакет `intl` с учетом текущей выбранной локали.
    *   Пример: `NumberFormat.currency(locale: 'ru_RU', symbol: '₽').format(amount)`.
3.  **Assets:** Иконки SVG.
4.  **Input Masking:** Маски ввода для телефонов и карт.
5.  **Error Handling:** Сообщения об ошибках должны приходить кодами от бэкенда или мапиться на клиенте в локализованные строки (например, ошибка "NETWORK_ERROR" -> отображается как "Ошибка сети" или "Network Error").